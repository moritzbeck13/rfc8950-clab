interface system0 {
    description "$ROUTER_LOOPBACK_NAME-interface"
    subinterface 0 {
        ipv4 {
            admin-state enable
            address $ROUTER_LOOPBACK_ADDRESS/$ROUTER_LOOPBACK_PREFIX_LENGTH {
            }
        }
    }
}
interface ethernet-1/1 {
    description "$PEERING_LAN_NAME-interface"
    subinterface 0 {
        ipv6 {
            admin-state enable
            address $PEERING_LAN_ADDRESS/$PEERING_LAN_PREFIX_LENGTH {
            }
        }
    }
}
interface ethernet-1/2 {
    description "$CLIENT_LAN_NAME-interface"
    subinterface 0 {
        ipv4 {
            admin-state enable
            address $CLIENT_LAN_ADDRESS/$CLIENT_LAN_PREFIX_LENGTH {
            }
        }
    }
}

routing-policy {
    prefix-set "$CLIENT_LAN_NAME-prefix-set" {
        prefix $CLIENT_LAN_NETWORK/$CLIENT_LAN_PREFIX_LENGTH mask-length-range exact {
        }
    }

    policy "accept-$CLIENT_LAN_NAME-policy" {
        statement 10 {
            match {
                prefix {
                    prefix-set "$CLIENT_LAN_NAME-prefix-set"
                }
            }
            action {
                policy-result accept
            }
        }
    }
    policy "default-accept-policy" {
        default-action {
            policy-result accept
        }
    }
}

network-instance "default" {
    interface ethernet-1/1.0 {
    }
    interface ethernet-1/2.0 {
    }

    ip-forwarding {
        receive-ipv4-check false
    }

    protocols {
        bgp {
            autonomous-system $ASN
            router-id $ROUTER_LOOPBACK_ADDRESS

            export-policy [ "accept-$CLIENT_LAN_NAME-policy" ]
            import-policy [ "default-accept-policy" ]

            afi-safi ipv4-unicast {
                admin-state enable
                ipv4-unicast {
                    advertise-ipv6-next-hops true
                    receive-ipv6-next-hops true
                }
            }

            group "$PEERING_LAN_NAME-group" {
            }
            $NEIGHBORS
        }
    }
}